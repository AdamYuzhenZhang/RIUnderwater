<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>360 VR Test</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function(event) {
            var scene = document.querySelector("a-scene");
            var vid = document.getElementById("video");
            var videoShere = document.getElementById("videoShere");

            if (scene.hasLoaded) {
                run();
            } else {
                scene.addEventListener("loaded", run);
            }

            function run () {
                if(AFRAME.utils.device.isMobile()) {
                    document.querySelector('#splash').style.display = 'flex';
                    document.querySelector('#splash').addEventListener('click', function () {
                        playVideo();
                        this.style.display = 'none';
                    })
                    //playVideo();
                } else {
                    playVideo();
                }
            }

            function playVideo () {
                vid.play();
                videoShere.components.material.material.map.image.play();
            }
        })
    </script>
</head>
<body>
<div id="splash">
    <div id="start-button">Start</div>
</div>
<a-scene>
    <a-assets>
        <video id="video" preload="auto"
               src="https://cdn.aframe.io/360-video-boilerplate/video/city.mp4"
               autoplay loop="true" crossOrigin="anonymous" muted></video>
    </a-assets>
    <a-videosphere id="videoShere" loop="true" src="#video" rotation="0 -50 0"></a-videosphere>
    <a-entity camera="userHeight: 1.6" look-controls cursor="rayOrigin: mouse"></a-entity>

    <a-box position="-1 -1.5 -3" rotation="0 45 0" color="#4CC3D9"></a-box>
    <a-sphere position="0 -1.25 -5" radius="1.25" color="#EF2D5E"></a-sphere>
    <a-cylinder position="1 -1.75 -3" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder>
    <a-plane position="0 -2 -4" rotation="-90 0 0" width="4" height="4" color="#7BC8A4"></a-plane>

</a-scene>
</body>
</html>